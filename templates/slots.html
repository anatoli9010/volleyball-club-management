{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3>–°–µ–¥–º–∏—á–Ω–∏ —Å–ª–æ—Ç–æ–≤–µ</h3>
  <form method="post" action="{{ url_for('seed_summer_season') }}" onsubmit="return confirm('–í—ä–≤–µ–∂–¥–∞–Ω–µ/–ø—Ä–µ–∑–∞–ø–∏—Å –Ω–∞ –õ–ï–¢–ï–ù 2024/2025 –≥—Ä–∞—Ñ–∏–∫. –ü—Ä–æ–¥—ä–ª–∂–∞–≤–∞—Ç–µ –ª–∏?');">
    <button class="btn btn-outline-primary btn-sm">‚ö° –í—ä–≤–µ–¥–∏ –õ–ï–¢–ï–ù 2024/2025</button>
  </form>
  <form method="post" action="{{ url_for('seed_from_image') }}" onsubmit="return confirm('–î–∞ –≤—ä–≤–µ–¥–∞ –≥—Ä–∞—Ñ–∏–∫–∞ –æ—Ç —Å–Ω–∏–º–∫–∞—Ç–∞ –∏ –¥–∞ –∏–∑—Ç—Ä–∏—è —Å—Ç–∞—Ä–∏—Ç–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏?');" class="ms-2">
    <button class="btn btn-outline-success btn-sm">üñºÔ∏è –í—ä–≤–µ–¥–∏ –≥—Ä–∞—Ñ–∏–∫–∞ –æ—Ç —Å–Ω–∏–º–∫–∞—Ç–∞</button>
  </form>
</div>
<form method="post" class="row g-2 mb-3">
  <div class="col-md-3">
    <select name="season_id" class="form-select" required>
      {% for s in seasons %}
        <option value="{{ s.id }}" {% if s.is_active %}selected{% endif %}>{{ s.name }}{% if s.is_active %} (–∞–∫—Ç–∏–≤–µ–Ω){% endif %}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-3">
    <select name="team_id" class="form-select">
      <option value="">‚Äî –±–µ–∑ –æ—Ç–±–æ—Ä ‚Äî</option>
      {% for t in teams %}
        <option value="{{ t.id }}">{{ t.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-2">
    <select name="weekday" class="form-select" required>
      <option value="0">–ü–æ–Ω–µ–¥–µ–ª–Ω–∏–∫</option>
      <option value="1">–í—Ç–æ—Ä–Ω–∏–∫</option>
      <option value="2">–°—Ä—è–¥–∞</option>
      <option value="3">–ß–µ—Ç–≤—ä—Ä—Ç—ä–∫</option>
      <option value="4">–ü–µ—Ç—ä–∫</option>
      <option value="5">–°—ä–±–æ—Ç–∞</option>
      <option value="6">–ù–µ–¥–µ–ª—è</option>
    </select>
  </div>
  <div class="col-md-2"><input name="start_time" class="form-control" type="time" required></div>
  <div class="col-md-2"><input name="end_time" class="form-control" type="time" required></div>
  <div class="col-md-2"><input name="venue" class="form-control" placeholder="–ó–∞–ª–∞ (–ù–£–ü–ò/–ß–∞–≤–¥–∞—Ä/–°—Ç–∞–¥–∏–æ–Ω)"></div>
  <div class="col-md-3"><input name="title" class="form-control" placeholder="–ï—Ç–∏–∫–µ—Ç (–Ω–∞–ø—Ä. –ú–æ–º–∏—á–µ—Ç–∞ –¥–æ 12–≥)"></div>
  <div class="col-md-2"><button class="btn btn-primary w-100">–î–æ–±–∞–≤–∏</button></div>
</form>
<table class="table table-striped">
  <thead><tr><th>–°–µ–∑–æ–Ω</th><th>–û—Ç–±–æ—Ä</th><th>–î–µ–Ω</th><th>–ß–∞—Å</th><th>–ó–∞–ª–∞</th><th>–ï—Ç–∏–∫–µ—Ç</th><th></th></tr></thead>
  <tbody>
    {% for s in slots %}
    <tr>
      <td>{{ s.season_id }}</td>
      <td>
        {% set t = Team.query.get(s.team_id) if s.team_id else None %}
        {% if t %}
          <span style="color: {{ team_color(t.name) }}; font-weight: 600">{{ t.name }}</span>
        {% else %}-{% endif %}
      </td>
      <td>{{ ['–ü–æ–Ω','–í—Ç–æ','–°—Ä—è','–ß–µ—Ç','–ü–µ—Ç','–°—ä–±','–ù–µ–¥'][s.weekday] }}</td>
      <td>{{ s.start_time }}‚Äì{{ s.end_time }}</td>
      <td>{{ s.venue or '-' }}</td>
      <td>{{ s.title or '-' }}</td>
      <td class="text-end">
        <form method="post" action="{{ url_for('delete_recurring_slot', slot_id=s.id) }}" onsubmit="return confirm('–ò–∑—Ç—Ä–∏–≤–∞–Ω–µ –Ω–∞ —Å–ª–æ—Ç–∞?');" style="display:inline">
          <button class="btn btn-sm btn-outline-danger">–ò–∑—Ç—Ä–∏–π</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
